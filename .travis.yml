language: perl
perl:
- '5.14'
- '5.10'
env:
  matrix:
  - COVERALLS=true  DB=mysql
  - COVERALLS=false DB=mysql
  global:
    secure: MKVXcMdfX5skL3HMIIQrISF/1h8uu3x0rLremA5OmD2GnUt0V3szyWn2q1EDozghS60Jd8igkE1z2neSR6fVUanxsD4u031SZz2djIVtcdONQ4Ixdr1L4W+KncbmnrTtASeQSOKQJ8B4Fq+pCMF9Ty9NSjFZlUoIS5ntBJPLsjCNheyQpZH5byv+RTKWs2C6ck/+7IU5cLxR6hB1Ceu/OsUbJkt1L3qrdKhn3LL+Ro7mCFseoW2yT2SemEvac2UwM0DVFoy927W30DS8x1C0012LEJGJPtWgwQeW0a6dPFzpx078MJnJruVpmKc8IvmeWJ/mva/TIJ8JkunGN5c80ZVs4t/uPDygWvSNwKYYGZrSZ6UIoUsnx06XpkpfDYSjvU/tX9d8qeIwzIlQnimgQJ9S9lv/GdDMm4dkjMu3JRQVloyssk3OA4GpND6epzT2EzT0+KKNYsFd3rQexuFlJb2RqQFm7XH29hcUa9L88gmy3Gpxu1SxjItZ1bBVBuxtKS6vCP00hGgD5c04E3zal/hJBmaElrUBvUNgiRCkLpCMkcsloglvbAWqVc7ETfz2ypJKy50e6hkw1qld5im4tcSgic2J/VHndAV6TOpfD/AmUYcBQAX3DWbVlarvU6jBdw5TftNJldwHUlMu2yc2D3ZgFwWYmKCMPUYt7fgjX6Q=
sudo: false
addons:
  apt:
    packages:
    - unzip
before_install:
- git clone --branch master --depth 1 https://github.com/Ensembl/ensembl-test.git
- git clone --branch master --depth 1 https://github.com/Ensembl/ensembl.git
- git clone --branch master --depth 1 https://github.com/Ensembl/ensembl-variation.git
- wget https://github.com/bioperl/bioperl-live/archive/bioperl-release-1-2-3.zip
- unzip bioperl-release-1-2-3.zip
install:
- cpanm -v --installdeps --with-recommends --notest --cpanfile ensembl/cpanfile .
- cpanm -n Devel::Cover::Report::Coveralls
- cpanm -n DBD::SQLite
- cpanm -n Data::Dumper
- cp travisci/MultiTestDB.conf modules/t/MultiTestDB.conf
script: "./travisci/harness.sh"
jobs:
  include:
  - stage: trigger_dependent_builds
    script: "./travisci/trigger-dependent-build.sh"
matrix:
  exclude:
  - perl: '5.10'
    env: COVERALLS=false DB=mysql
  - perl: '5.14'
    env: COVERALLS=true  DB=mysql
notifications:
  email:
    on_success: always
    on_failure: always
  slack:
    secure: RVe7KGN12ioTw7UHi/hjq+82BS4kDsgCtO9Fy8pZiZl1XjzrPmZCnuRmxwbSngIV54vkFNKGuXyiR71HkAm2EaDxeThqnTXXAhtTHSdhFB+XtIJ/ngTyWEpGwK0XSz1eOFAyrCdMFUQJIW6dl5kyfNnz6adLiMGoQYzKpbPsY5qPkO7r3UO9NDRLubO7xU88cPY4AGaqiynQLoR+MLXnolkKy771jY/vprEBVd30WR+JQaPvC6PPDtCAbyFjgXCqMseHkqszCN0AOjtBFumF4JW/xoPPp1zERfC1BM9lDdhgTtgBls7wxOSvvhwhs4QwBRHy6UfJb77XAAdt7/CuGVi51OwDzqJGHxBTxBMYdTy2JeBwUqsPopYfZ6upZ8T06Qin7JbDzMvI8qCI9UYWk76tVnqW7AybhI+P8PRH23KOhCJZJn1igJcR6D0QfFNWoyBNgoSg5kHZjNMcnI72SN6V9TsU90WPfS9vJc5c1JpCe7wjdgau3tIJbAj+d3G32Kt8KbWo0pS1LG6GFysXmu1b8Q7uuY4ch1Un9pu2f6A4W3WgILfXletWadjZ1LyQWFNY1hFJAgsGHQM0Qg/7kYZJ1RkoyS9M9Ix/nopow70BpWDHNtMRravauC3KeQ6DyPRf8h+HKhZqSfTPdzRZk7d97mNmRrz8w9TxIPE9Zdg=
